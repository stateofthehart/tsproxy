# SSH config snippet for accessing hosts via the SOCKS proxy
# Add to ~/.ssh/config
#
# CUSTOMIZE:
#   <SUFFIX>: Your DNS suffix (e.g., work, corp, lab)
#   <HOST_TAILNET_IP>: Your proxy host's Tailscale IP
#   <SOCKS_PORT>: SOCKS5 port (default: 11080)

# Route all .<SUFFIX> hosts through the SOCKS proxy
# The dig command resolves the hostname locally (via /etc/resolver/<SUFFIX>),
# then passes the resolved IP to nc for the SOCKS connection.
Host *.<SUFFIX>
  ProxyCommand bash -c 'nc -X 5 -x <HOST_TAILNET_IP>:<SOCKS_PORT> $(dig +short %h) %p'

# Example: Define specific hosts for convenience
# Host work-server
#   HostName 10.0.0.50.<SUFFIX>
#   User admin
#   ProxyCommand bash -c 'nc -X 5 -x <HOST_TAILNET_IP>:<SOCKS_PORT> $(dig +short %h) %p'
