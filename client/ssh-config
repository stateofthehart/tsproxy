# SSH config snippet for accessing hosts via the SOCKS proxy
# Add to ~/.ssh/config

# Route all .fgpu hosts through the SOCKS proxy
# Note: We use dig to resolve the hostname locally because microsocks
# doesn't support SOCKS5 remote hostname resolution (DOMAINNAME type).
# The dig command queries your local DNS (which routes .fgpu to CoreDNS),
# then passes the resolved IP to nc for the SOCKS connection.
Host *.fgpu
  ProxyCommand bash -c 'nc -X 5 -x 100.121.76.21:11080 $(dig +short %h) %p'

# Example: Define specific hosts for convenience
# Host gpu-server
#   HostName 10.100.10.141.fgpu
#   User admin
#   ProxyCommand bash -c 'nc -X 5 -x 100.121.76.21:11080 $(dig +short %h) %p'
