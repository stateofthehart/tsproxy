# Dante SOCKS5 server configuration for namespace proxy
#
# CUSTOMIZE:
#   <VETH_NS_IP>: Namespace veth IP (default: 10.200.0.6)
#   <SOCKS_PORT>: SOCKS5 port (default: 11080)
# Filename should match: dante-<NAMESPACE>.conf
#
# This configuration:
#   - Listens on the namespace's veth IP (reachable from host)
#   - Routes outbound traffic through the namespace's tailscale0 interface
#   - Supports SOCKS5 hostname resolution (DOMAINNAME address type)

logoutput: syslog

# Listen on the namespace veth IP
internal: <VETH_NS_IP> port = <SOCKS_PORT>

# Use the tailscale interface for outbound connections
external: tailscale0

# Allow unauthenticated connections from the veth subnet
clientmethod: none
socksmethod: none

client pass {
    from: 10.200.0.0/24 to: 0.0.0.0/0
    log: connect disconnect error
}

socks pass {
    from: 10.200.0.0/24 to: 0.0.0.0/0
    log: connect disconnect error
}
